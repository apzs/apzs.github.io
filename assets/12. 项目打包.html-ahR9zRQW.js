import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as l,c as i,a as n,b as s,d as e,e as t}from"./app-ldxHvpH7.js";const p={},r=t(`<h1 id="小兔鲜儿-项目打包" tabindex="-1"><a class="header-anchor" href="#小兔鲜儿-项目打包" aria-hidden="true">#</a> 小兔鲜儿 - 项目打包</h1><h2 id="微信小程序端" tabindex="-1"><a class="header-anchor" href="#微信小程序端" aria-hidden="true">#</a> 微信小程序端</h2><p>把当前 uni-app 项目打包成微信小程序端，并发布上线。</p><h3 id="核心步骤" tabindex="-1"><a class="header-anchor" href="#核心步骤" aria-hidden="true">#</a> 核心步骤</h3><ol><li>运行打包命令 <code>pnpm build:mp-weixin</code></li><li>预览和测试，微信开发者工具导入生成的 <code>/dist/build/mp-weixin</code> 目录</li><li>上传小程序代码</li><li>提交审核和发布</li></ol><h3 id="步骤图示" tabindex="-1"><a class="header-anchor" href="#步骤图示" aria-hidden="true">#</a> 步骤图示</h3><p>项目打包上线需要使用到多个工具，注意工具之间的职责。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>VSCode ----<span class="token operator">&gt;</span> 微信开发者工具 ----<span class="token operator">&gt;</span> 微信公众平台
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,8),u={href:"https://developers.weixin.qq.com/miniprogram/dev/devtools/ci.html",target:"_blank",rel:"noopener noreferrer"},d=n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"举一反三"),n("p",null,[s("打包成其他小程序端的步骤类似，只是更换了 "),n("strong",null,"打包命令"),s(" 和 "),n("strong",null,"开发者工具"),s(" 。")])],-1),k=n("h2",{id:"条件编译",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#条件编译","aria-hidden":"true"},"#"),s(" 条件编译")],-1),h={class:"hint-container tip"},m=n("p",{class:"hint-container-title"},"常见问题",-1),b=n("p",null,"Q：按照 uni-app 规范开发可保证多平台兼容，但每个平台有自己的一些特性，该如何处理？",-1),v={href:"https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor",target:"_blank",rel:"noopener noreferrer"},g=n("figure",null,[n("img",{src:"https://gitlab.com/apzs/image/-/raw/master/image/build_picture_2.png",alt:"多端登录",tabindex:"0",loading:"lazy"}),n("figcaption",null,"多端登录")],-1),_=n("strong",null,"网页端不支持微信平台授权登录等功能",-1),f={href:"https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor",target:"_blank",rel:"noopener noreferrer"},x=t('<h3 id="条件编译语法" tabindex="-1"><a class="header-anchor" href="#条件编译语法" aria-hidden="true">#</a> 条件编译语法</h3><p>通过特殊注释，以 <strong><code>#ifdef</code></strong> 或 <strong><code>#ifndef</code></strong> 加 <strong>平台名称</strong> 开头，以 <strong><code>#endif</code></strong> 结尾。</p><p>条件编译支持: vue, ts, js, scss, css, pages.json 等文件。</p>',3),q=n("div",{class:"language-vue line-numbers-mode","data-ext":"vue"},[n("pre",{vue:"",class:"language-vue"},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("script")]),s(),n("span",{class:"token attr-name"},"setup"),s(),n("span",{class:"token attr-name"},"lang"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("ts"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[s(`
`),n("span",{class:"token comment"},"// 微信平台特有API，需要条件编译"),s(`
`),n("span",{class:"token comment"},"// #ifdef MP-WEIXIN"),s(`
wx`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"login"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
wx`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestPayment"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token comment"},"// #endif"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("script")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token comment"},"<!-- 微信开发能力按钮，需要条件编译 -->"),s(`
  `),n("span",{class:"token comment"},"<!-- #ifdef MP-WEIXIN -->"),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("button")]),s(),n("span",{class:"token attr-name"},"open-type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("openSetting"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("授权管理"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("button")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("button")]),s(),n("span",{class:"token attr-name"},"open-type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("feedback"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("问题反馈"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("button")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("button")]),s(),n("span",{class:"token attr-name"},"open-type"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("contact"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s("联系我们"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("button")]),n("span",{class:"token punctuation"},">")]),s(`
  `),n("span",{class:"token comment"},"<!-- #endif -->"),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("template")]),n("span",{class:"token punctuation"},">")]),s(`

`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("style")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token style"},[n("span",{class:"token language-css"},[s(`
`),n("span",{class:"token comment"},"/* 如果出现样式兼容，也可添加条件编译 */"),s(`
`),n("span",{class:"token selector"},"page"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token comment"},"/* #ifdef H5 */"),s(`
  `),n("span",{class:"token property"},"background-color"),n("span",{class:"token punctuation"},":"),s(" pink"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token comment"},"/* #endif */"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("style")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=t(`<p>了解：<code>#ifdef H5 || MP-WEIXIN</code> 表示在 H5 平台 <strong>或</strong> 微信小程序平台存在的代码。</p><div class="hint-container tip"><p class="hint-container-title">开发技巧</p><p>可通过搜索 <code>wx.</code> 和 <code>open-type</code> 等平台关键词，快速查找需要添加编译模式的代码。</p></div><h2 id="打包为-h5-端" tabindex="-1"><a class="header-anchor" href="#打包为-h5-端" aria-hidden="true">#</a> 打包为 H5 端</h2><p>把当前 uni-app 项目打包成网页(H5)端，并配置路由基础路径。</p><h3 id="核心步骤-1" tabindex="-1"><a class="header-anchor" href="#核心步骤-1" aria-hidden="true">#</a> 核心步骤</h3><ol><li>运行打包命令 <code>pnpm build:h5</code></li><li>预览和测试，使用浏览器打开 <code>/dist/build/h5</code> 目录下的 <code>index.html</code> 文件</li><li>由运维部署到服务器</li></ol><h3 id="路由基础路径" tabindex="-1"><a class="header-anchor" href="#路由基础路径" aria-hidden="true">#</a> 路由基础路径</h3><p>默认的路由基础路径为 <code>/</code> 根路径，部分网站并不是部署到根路径，需要按运维要求调整。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">// manifest.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">/* 网页端特有配置 */</span>
  <span class="token property">&quot;h5&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;router&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 基础路径：./ 为相对路径</span>
      <span class="token property">&quot;base&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token comment">/* 小程序特有相关 */</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mp-weixin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// …省略</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;vueVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打包为-app-端" tabindex="-1"><a class="header-anchor" href="#打包为-app-端" aria-hidden="true">#</a> 打包为 APP 端</h2>`,10),I={href:"https://uniapp.dcloud.net.cn/tutorial/run/run-app.html",target:"_blank",rel:"noopener noreferrer"},w=n("code",null,"HBuilderX",-1);function j(N,P){const a=c("ExternalLinkIcon");return l(),i("div",null,[r,n("p",null,[s("了解：开发者可独立使用 "),n("a",u,[s("miniprogram-ci"),e(a)]),s(" 进行小程序代码的上传等操作!")]),d,k,n("div",h,[m,b,n("p",null,[s("A：通过 "),n("a",v,[s("条件编译"),e(a)]),s("，让代码按条件编译到指定平台。")])]),g,n("p",null,[_,s("，可通过 "),n("a",f,[s("条件编译"),e(a)]),s("，实现不同端渲染不同的登录界面。")]),x,q,y,n("p",null,[n("a",I,[s("App 端"),e(a)]),s(" 的打包，预览、测试、发行，使用 "),w,s(" 工具。")])])}const V=o(p,[["render",j],["__file","12. 项目打包.html.vue"]]);export{V as default};
