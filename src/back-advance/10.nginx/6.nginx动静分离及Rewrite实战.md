 

> ğŸŒ±æœ¬ä¸“æ å°†ä¼šä»åŸºç¡€å¼€å§‹ï¼Œå¾ªåºæ¸è¿›è®²è§£Nginxçš„ä½¿ç”¨å’Œæœ‰å…³é…ç½®ï¼Œä¹Ÿè¯·å¤§å®¶å¤šå¤šæ”¯æŒ,å¸Œæœ›å¤§å®¶éƒ½èƒ½å¤Ÿä»ä¸­è·ç›Šã€‚  
> ğŸ“«ä¸“æ åœ°å€:[Nginx](https://blog.csdn.net/learning_xzj/category_11792194.html)  
> ğŸ“«ç›¸å…³è½¯ä»¶:[é“¾æ¥åœ°å€](https://pan.baidu.com/s/12VmjEzxEKeiwrONceaWguA?pwd=aaaa)

### æ–‡ç« ç›®å½•

*   *   [åŠ¨é™åˆ†ç¦»](#_5)
    *   *   [åŠ¨é™åˆ†ç¦»åŸç†](#_9)
        *   [NginxåŠ¨é™åˆ†ç¦»é…ç½®](#Nginx_15)
        *   [ä½¿ç”¨æ­£åˆ™é…ç½®åŠ¨é™åˆ†ç¦»](#_144)
    *   [URLRewrite](#URLRewrite_271)
    *   *   [URLRewriteçš„ä¼˜ç¼ºç‚¹](#URLRewrite_279)
        *   [å®ä¾‹](#_285)
    *   [è´Ÿè½½å‡è¡¡+URLRewriteå®æˆ˜](#URLRewrite_304)

åŠ¨é™åˆ†ç¦»
----

ä¸ºäº†æé«˜ç½‘ç«™çš„å“åº”é€Ÿåº¦ï¼Œå‡è½»ç¨‹åºæœåŠ¡å™¨ï¼ˆTomcatï¼Œ[Jboss](https://so.csdn.net/so/search?q=Jboss&spm=1001.2101.3001.7020)ç­‰ï¼‰çš„è´Ÿè½½ï¼Œå¯¹äºé™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€jsã€cssç­‰æ–‡ä»¶ï¼Œå¯ä»¥åœ¨åå‘ä»£ç†æœåŠ¡å™¨ä¸­è¿›è¡Œç¼“å­˜ï¼Œè¿™æ ·æµè§ˆå™¨åœ¨è¯·æ±‚ä¸€ä¸ªé™æ€èµ„æºæ—¶ï¼Œä»£ç†æœåŠ¡å™¨å°±å¯ä»¥ç›´æ¥å¤„ç†ï¼Œè€Œä¸ç”¨å°†è¯·æ±‚è½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚å¯¹äºç”¨æˆ·è¯·æ±‚çš„åŠ¨æ€æ–‡ä»¶ï¼Œå¦‚servletã€jspï¼Œåˆ™è½¬å‘ç»™Tomcatï¼ŒJbossæœåŠ¡å™¨å¤„ç†ï¼Œè¿™å°±æ˜¯åŠ¨é™åˆ†ç¦»ã€‚å³åŠ¨æ€æ–‡ä»¶ä¸é™æ€æ–‡ä»¶çš„åˆ†ç¦»ã€‚

### åŠ¨é™åˆ†ç¦»åŸç†

![img](https://gitlab.com/apzs/image/-/raw/master/image/format,png.png)

åŠ¨é™åˆ†ç¦»å¯é€šè¿‡locationå¯¹è¯·æ±‚urlè¿›è¡ŒåŒ¹é…ï¼Œå°†ç½‘ç«™é™æ€èµ„æºï¼ˆHTMLï¼ŒJavaScriptï¼ŒCSSï¼Œimgç­‰æ–‡ä»¶ï¼‰ä¸åå°åº”ç”¨åˆ†å¼€éƒ¨ç½²ï¼Œæé«˜ç”¨æˆ·è®¿é—®é™æ€ä»£ç çš„é€Ÿåº¦ï¼Œé™ä½å¯¹åå°åº”ç”¨è®¿é—®ã€‚é€šå¸¸å°†é™æ€èµ„æºæ”¾åˆ°nginxä¸­ï¼ŒåŠ¨æ€èµ„æºè½¬å‘åˆ°tomcatæœåŠ¡å™¨ä¸­ã€‚

### NginxåŠ¨é™åˆ†ç¦»é…ç½®

é¦–å…ˆä½¿ç”¨å®å¡”é¢æ¿å®‰è£…tomcatï¼š

![image-20220430212617823](https://gitlab.com/apzs/image/-/raw/master/image/cb82df6639110eb6f6c0941ab3de59c6.png)

å®‰è£…æˆåŠŸè®¿é—®http://192.168.8.101:8080/ï¼š

![image-20220430212714827](https://gitlab.com/apzs/image/-/raw/master/image/c2e06fde63ad193803bbcadb13d78918.png)

å°†charts-project.zipè§£å‹å¹¶æ”¾å…¥å¦‚ä¸‹ä½ç½®ï¼Œcharts-project.zipä¸‹è½½åœ°å€ï¼šhttps://pan.baidu.com/s/1baD910BQD1DGdwdMmK0qTg?pwd=aaaa

![image-20220430215000509](https://gitlab.com/apzs/image/-/raw/master/image/7432660e3c4dfeeb9e2c6b9df0c61ee9.png)

è®¿é—®http://192.168.8.101:8080/ï¼š  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://gitlab.com/apzs/image/-/raw/master/image/95fbbf4cd867423fbe72f06a502af47f.png)

é…ç½®102çš„[åå‘ä»£ç†](https://so.csdn.net/so/search?q=%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86&spm=1001.2101.3001.7020)ï¼š

*   nginx.cfg

```nginx
worker_processes  1;



events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;


    sendfile        on;

    keepalive_timeout  65;


    server {
        listen       80;
        server_name  localhost;


        location / {
            proxy_pass http://192.168.8.101:8080;

        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

    }


}
```

è®¿é—®http://192.168.8.102

![image-20220430215807592](https://gitlab.com/apzs/image/-/raw/master/image/0b39c63aaa3ba0649eed106ec6e0fb3e.png)

å°†imagesæ–‡ä»¶å¤¹åˆ é™¤ï¼š

![image-20220430220315636](https://gitlab.com/apzs/image/-/raw/master/image/fc8a074a43282fb9324775b7d3330676.png)

è®¿é—®http://192.168.8.102/ï¼Œå‘ç°å›¾ç‰‡è®¿é—®ä¸åˆ°äº†ï¼š

![image-20220430220336407](https://gitlab.com/apzs/image/-/raw/master/image/756dfc79f089f2036dbfe3f4af6932e7.png)

æ¥ä¸‹æ¥å°†é™æ€èµ„æºé…ç½®åˆ°ä»£ç†æœåŠ¡å™¨102ï¼š

![image-20220501095635683](https://gitlab.com/apzs/image/-/raw/master/image/1cbf743fcdae199194fb85a1ff069cce.png)

é…ç½®102çš„nginx.cfg

```nginx
#user  nobody;
worker_processes  1;



events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;


    server {
        listen       80;
        server_name  localhost;

        location / {
            proxy_pass http://192.168.8.101:8080;
        }
        
        location /images {
            root   /www/resources;
            index  index.html index.htm;
        }
        

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

    }

}
```

è®¿é—®192.168.8.102ï¼Œå‘ç°å›¾ç‰‡åˆå‡ºç°äº†ï¼š

![image-20220501095945318](https://gitlab.com/apzs/image/-/raw/master/image/4ef9a6ed31f05d04850b1f56d4a4e53f.png)

### ä½¿ç”¨æ­£åˆ™é…ç½®åŠ¨é™åˆ†ç¦»

å¸¸è§çš„Nginxæ­£åˆ™è¡¨è¾¾å¼

    ^ ï¼šåŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®
    $ ï¼šåŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®
    * ï¼šåŒ¹é…å‰é¢çš„å­—ç¬¦é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚å¦‚â€œol*â€èƒ½åŒ¹é…â€œoâ€åŠâ€œolâ€ã€â€œollâ€
    + ï¼šåŒ¹é…å‰é¢çš„å­—ç¬¦ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚å¦‚â€œol+â€èƒ½åŒ¹é…â€œolâ€åŠâ€œollâ€ã€â€œolllâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œoâ€
    ? ï¼šåŒ¹é…å‰é¢çš„å­—ç¬¦é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œä¾‹å¦‚â€œdo(es)?â€èƒ½åŒ¹é…â€œdoâ€æˆ–è€…â€œdoesâ€ï¼Œâ€?â€ç­‰æ•ˆäºâ€{0,1}â€
    . ï¼šåŒ¹é…é™¤â€œ\nâ€ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œè‹¥è¦åŒ¹é…åŒ…æ‹¬â€œ\nâ€åœ¨å†…çš„ä»»æ„å­—ç¬¦ï¼Œè¯·ä½¿ç”¨è¯¸å¦‚â€œ[.\n]â€ä¹‹ç±»çš„æ¨¡å¼
    \ ï¼šå°†åé¢æ¥ç€çš„å­—ç¬¦æ ‡è®°ä¸ºä¸€ä¸ªç‰¹æ®Šå­—ç¬¦æˆ–ä¸€ä¸ªåŸä¹‰å­—ç¬¦æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚â€œ\nâ€åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè€Œâ€œ\$â€åˆ™åŒ¹é…â€œ$â€
    \d ï¼šåŒ¹é…çº¯æ•°å­—
    {n} ï¼šé‡å¤ n æ¬¡
    {n,} ï¼šé‡å¤ n æ¬¡æˆ–æ›´å¤šæ¬¡
    {n,m} ï¼šé‡å¤ n åˆ° m æ¬¡
    [] ï¼šå®šä¹‰åŒ¹é…çš„å­—ç¬¦èŒƒå›´
    [c] ï¼šåŒ¹é…å•ä¸ªå­—ç¬¦ c
    [a-z] ï¼šåŒ¹é… a-z å°å†™å­—æ¯çš„ä»»æ„ä¸€ä¸ª
    [a-zA-Z0-9] ï¼šåŒ¹é…æ‰€æœ‰å¤§å°å†™å­—æ¯æˆ–æ•°å­—
    () ï¼šè¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®
    | ï¼šæˆ–è¿ç®—ç¬¦  //ä¾‹(js|img|css)


locationæ­£åˆ™ï¼š

    //locationå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»
    ç²¾å‡†åŒ¹é…ï¼šlocation = /{}
    ä¸€èˆ¬åŒ¹é…ï¼šlocation /{}
    æ­£åˆ™åŒ¹é…ï¼šlocation ~/{}
    //locationå¸¸ç”¨çš„åŒ¹é…è§„åˆ™ï¼š
    = ï¼šè¿›è¡Œæ™®é€šå­—ç¬¦ç²¾ç¡®åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯å®Œå…¨åŒ¹é…ã€‚
    ^~ ï¼šè¡¨ç¤ºå‰ç¼€å­—ç¬¦ä¸²åŒ¹é…ï¼ˆä¸æ˜¯æ­£åˆ™åŒ¹é…ï¼Œéœ€è¦ä½¿ç”¨å­—ç¬¦ä¸²ï¼‰ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†åŒ¹é…å…¶å®ƒ locationã€‚
    ~ ï¼šåŒºåˆ†å¤§å°å†™çš„åŒ¹é…ï¼ˆéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
    ~* ï¼šä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…ï¼ˆéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
    !~ ï¼šåŒºåˆ†å¤§å°å†™çš„åŒ¹é…å–éï¼ˆéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
    !~* ï¼šä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…å–éï¼ˆéœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
    //ä¼˜å…ˆçº§
    é¦–å…ˆç²¾ç¡®åŒ¹é… =
    å…¶æ¬¡å‰ç¼€åŒ¹é… ^~
    å…¶æ¬¡æ˜¯æŒ‰æ–‡ä»¶ä¸­é¡ºåºçš„æ­£åˆ™åŒ¹é… ~æˆ–~*
    ç„¶ååŒ¹é…ä¸å¸¦ä»»ä½•ä¿®é¥°çš„å‰ç¼€åŒ¹é…
    æœ€åæ˜¯äº¤ç»™ / é€šç”¨åŒ¹é…


**æ³¨æ„ï¼š**

*   ç²¾ç¡®åŒ¹é…ï¼š `=` ï¼Œ åé¢çš„è¡¨è¾¾å¼ä¸­å†™çš„æ˜¯çº¯å­—ç¬¦ä¸²
*   å­—ç¬¦ä¸²åŒ¹é…ï¼š `^~` å’Œ `æ— ç¬¦å·åŒ¹é…` ï¼Œ åé¢çš„è¡¨è¾¾å¼ä¸­å†™çš„æ˜¯çº¯å­—ç¬¦ä¸²
*   æ­£åˆ™åŒ¹é…ï¼š `~` å’Œ `~*` å’Œ `!~` å’Œ `!~*` ï¼Œ åé¢çš„è¡¨è¾¾å¼ä¸­å†™çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼

locationçš„è¯´æ˜

     (1ï¼‰location = / {}
    =ä¸ºç²¾ç¡®åŒ¹é… / ï¼Œä¸»æœºååé¢ä¸èƒ½å¸¦ä»»ä½•å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚è®¿é—® / å’Œ /dataï¼Œåˆ™ / åŒ¹é…ï¼Œ/data ä¸åŒ¹é…
    å†æ¯”å¦‚ location = /abcï¼Œåˆ™åªåŒ¹é…/abc ï¼Œ/abc/æˆ– /abcdä¸åŒ¹é…ã€‚è‹¥ location  /abcï¼Œåˆ™å³åŒ¹é…/abc ã€/abcd/ åŒæ—¶ä¹ŸåŒ¹é… /abc/ã€‚
    
    ï¼ˆ2ï¼‰location / {}
    å› ä¸ºæ‰€æœ‰çš„åœ°å€éƒ½ä»¥ / å¼€å¤´ï¼Œæ‰€ä»¥è¿™æ¡è§„åˆ™å°†åŒ¹é…åˆ°æ‰€æœ‰è¯·æ±‚ æ¯”å¦‚è®¿é—® / å’Œ /data, åˆ™ / åŒ¹é…ï¼Œ /data ä¹ŸåŒ¹é…ï¼Œ
    ä½†è‹¥åé¢æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¼šå’Œæœ€é•¿å­—ç¬¦ä¸²ä¼˜å…ˆåŒ¹é…ï¼ˆæœ€é•¿åŒ¹é…ï¼‰
    
    ï¼ˆ3ï¼‰location /documents/ {}
    åŒ¹é…ä»»ä½•ä»¥ /documents/ å¼€å¤´çš„åœ°å€ï¼ŒåŒ¹é…ç¬¦åˆä»¥åï¼Œè¿˜è¦ç»§ç»­å¾€ä¸‹æœç´¢å…¶å®ƒ location
    åªæœ‰å…¶å®ƒ locationåé¢çš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰åŒ¹é…åˆ°æ—¶ï¼Œæ‰ä¼šé‡‡ç”¨è¿™ä¸€æ¡
    
    ï¼ˆ4ï¼‰location /documents/abc {}
    åŒ¹é…ä»»ä½•ä»¥ /documents/abc å¼€å¤´çš„åœ°å€ï¼ŒåŒ¹é…ç¬¦åˆä»¥åï¼Œè¿˜è¦ç»§ç»­å¾€ä¸‹æœç´¢å…¶å®ƒ location
    åªæœ‰å…¶å®ƒ locationåé¢çš„æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰åŒ¹é…åˆ°æ—¶ï¼Œæ‰ä¼šé‡‡ç”¨è¿™ä¸€æ¡
    
    ï¼ˆ5ï¼‰location ^~ /images/ {}
    åŒ¹é…ä»»ä½•ä»¥ /images/ å¼€å¤´çš„åœ°å€ï¼ŒåŒ¹é…ç¬¦åˆä»¥åï¼Œåœæ­¢å¾€ä¸‹æœç´¢æ­£åˆ™ï¼Œé‡‡ç”¨è¿™ä¸€æ¡
    
    ï¼ˆ6ï¼‰location ~* \.(gif|jpg|jpeg)$ {}
    åŒ¹é…æ‰€æœ‰ä»¥ gifã€jpgæˆ–jpeg ç»“å°¾çš„è¯·æ±‚
    ç„¶è€Œï¼Œæ‰€æœ‰è¯·æ±‚ /images/ ä¸‹çš„å›¾ç‰‡ä¼šè¢« location ^~ /images/ å¤„ç†ï¼Œå› ä¸º ^~ çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥åˆ°è¾¾ä¸äº†è¿™ä¸€æ¡æ­£åˆ™
    
    ï¼ˆ7ï¼‰location /images/abc {}
    æœ€é•¿å­—ç¬¦åŒ¹é…åˆ° /images/abcï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œç»§ç»­å¾€ä¸‹æœç´¢å…¶å®ƒ locationï¼Œä¼šå‘ç° ^~ å’Œ ~ å­˜åœ¨
    
    ï¼ˆ8ï¼‰location ~ /images/abc {}
    åŒ¹é…ä»¥/images/abc å¼€å¤´çš„ï¼Œä¼˜å…ˆçº§æ¬¡ä¹‹ï¼Œåªæœ‰å»æ‰ location ^~ /images/ æ‰ä¼šé‡‡ç”¨è¿™ä¸€æ¡
    
    ï¼ˆ9ï¼‰location /images/abc/1.html {}
    åŒ¹é…/images/abc/1.html æ–‡ä»¶ï¼Œå¦‚æœå’Œæ­£åˆ™ ~ /images/abc/1.html ç›¸æ¯”ï¼Œæ­£åˆ™ä¼˜å…ˆçº§æ›´é«˜
    
    ä¼˜å…ˆçº§æ€»ç»“ï¼š
    (location =) > (location å®Œæ•´è·¯å¾„) > (location ^~ è·¯å¾„) > (location ~,~* æ­£åˆ™é¡ºåº) > (location éƒ¨åˆ†èµ·å§‹è·¯å¾„) > (location /)


å®é™…ç½‘ç«™ä½¿ç”¨ä¸­ï¼Œè‡³å°‘æœ‰ä¸‰ä¸ªåŒ¹é…è§„åˆ™å®šä¹‰:

*   ç¬¬ä¸€ä¸ªå¿…é€‰è§„åˆ™

ç›´æ¥åŒ¹é…ç½‘ç«™æ ¹ï¼Œé€šè¿‡åŸŸåè®¿é—®ç½‘ç«™é¦–é¡µæ¯”è¾ƒé¢‘ç¹ï¼Œä½¿ç”¨è¿™ä¸ªä¼šåŠ é€Ÿå¤„ç†ï¼Œæ¯”å¦‚è¯´å®˜ç½‘ã€‚è¿™é‡Œæ˜¯ç›´æ¥è½¬å‘ç»™åç«¯åº”ç”¨æœåŠ¡å™¨äº†ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªé™æ€é¦–é¡µ

    location = / {
        proxy_pass http://127.0.0.1:8080/; 
    }


*   ç¬¬äºŒä¸ªå¿…é€‰è§„åˆ™

å¤„ç†é™æ€æ–‡ä»¶è¯·æ±‚ï¼Œè¿™æ˜¯nginxä½œä¸ºhttpæœåŠ¡å™¨çš„å¼ºé¡¹,æœ‰ä¸¤ç§é…ç½®æ¨¡å¼ï¼Œç›®å½•åŒ¹é…æˆ–åç¼€åŒ¹é…,ä»»é€‰å…¶ä¸€æˆ–æ­é…ä½¿ç”¨

    location ^~ /static/ {
        root /webroot/static/;
    }
    
    location ~* \.(html|gif|jpg|jpeg|png|css|js|ico)$ {
        root /webroot/res/;
    }


*   ç¬¬ä¸‰ä¸ªè§„åˆ™

é€šç”¨è§„åˆ™ï¼Œç”¨æ¥è½¬å‘åŠ¨æ€è¯·æ±‚åˆ°åç«¯åº”ç”¨æœåŠ¡å™¨

    location /api/ {
        proxy_pass http://127.0.0.1:3000/api/
    }


URLRewrite
----------

rewriteæ˜¯å®ç°URLé‡å†™çš„å…³é”®æŒ‡ä»¤ï¼Œæ ¹æ®regex(æ­£åˆ™è¡¨è¾¾å¼)éƒ¨åˆ†å†…å®¹ï¼Œé‡å®šå‘åˆ°repacementï¼Œç»“å°¾æ˜¯flagæ ‡è®°ã€‚

æ ¼å¼ï¼š

![image-20220501143255652](https://gitlab.com/apzs/image/-/raw/master/image/7406887eafac182366bca590e6c96978.png)

### URLRewriteçš„ä¼˜ç¼ºç‚¹

ä¼˜ç‚¹ï¼šæ©è—çœŸå®çš„urlä»¥åŠurlä¸­å¯èƒ½æš´éœ²çš„å‚æ•°ï¼Œä»¥åŠéšè—webä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œæé«˜å®‰å…¨æ€§ä¾¿äºæœç´¢å¼•æ“æ”¶å½•

ç¼ºç‚¹ï¼šé™ä½æ•ˆç‡ï¼Œå½±å“æ€§èƒ½ã€‚å¦‚æœé¡¹ç›®æ˜¯[å†…ç½‘](https://so.csdn.net/so/search?q=%E5%86%85%E7%BD%91&spm=1001.2101.3001.7020)ä½¿ç”¨ï¼Œæ¯”å¦‚å…¬å¸å†…éƒ¨è½¯ä»¶ï¼Œåˆ™æ²¡æœ‰å¿…è¦é…ç½®ã€‚

### å®ä¾‹

é…ç½®nginx.cfg

![image-20220501142335578](https://gitlab.com/apzs/image/-/raw/master/image/79b2a9235f275c3256ad70e72be12f65.png)

ä»£ç ï¼š

    rewrite ^/test.html$ /index.html?testParam=3 break;
    
    //ä¹Ÿå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å½¢å¼ï¼š
    rewrite ^/[0-9]+.html$ /index.html?testParam=$1 break; //$1è¡¨ç¤ºç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸² 


æµ‹è¯•ï¼Œè®¿é—®http://192.168.8.102/test.html

![image-20220501142146334](https://gitlab.com/apzs/image/-/raw/master/image/81e417634c629544b033074e14b84456.png)

è´Ÿè½½å‡è¡¡+URLRewriteå®æˆ˜
-----------------

å¼€å¯101çš„é˜²ç«å¢™

    systemctl start firewalld


é‡è½½è§„åˆ™

    firewall-cmd --reload


æŸ¥çœ‹å·²é…ç½®è§„åˆ™

    firewall-cmd --list-all


æ·»åŠ æŒ‡å®šç«¯å£å’Œipè®¿é—®(æ·»åŠ ä¹‹åè®°å¾—é‡æ–°å¯åŠ¨é˜²ç«å¢™)

    firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="192.168.8.102" port protocol="tcp" port="8080" accept"


ç§»é™¤è§„åˆ™

    firewall-cmd --permanent --remove-rich-rule="rule family="ipv4" source address="192.168.8.102" port protocol="tcp" port="8080" accept"


é‡å¯é˜²ç«å¢™

    firewall-cmd --reload


æµ‹è¯•ï¼š

ç›´æ¥è®¿é—®ï¼šhttp://192.168.8.101:8080/

![image-20220501152145009](https://gitlab.com/apzs/image/-/raw/master/image/67fe2ed21e4891f5f3decdf326c653ec.png)

è®¿é—®ï¼šhttp://192.168.8.102:8888/test.html

![image-20220501152209744](https://gitlab.com/apzs/image/-/raw/master/image/9a9871231609d19d7795ed5bd9c22d6e.png)

ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„æ–¹å¼è®¿é—®ï¼š

![image-20220501152643444](https://gitlab.com/apzs/image/-/raw/master/image/7111ce547d00a75f16ef2692c82fc791.png)

æµ‹è¯•ï¼Œè®¿é—®http://192.168.8.102/test.html

![image-20220501152825327](https://gitlab.com/apzs/image/-/raw/master/image/e7ef574de8b43f5bc252b147f1fe9111.png)
